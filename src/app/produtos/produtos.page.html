<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Produtos</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-searchbar placeholder="Digite a descrição do produto">
  </ion-searchbar>
  </ion-toolbar>
</ion-header>


<ion-content > 
  <h1>{{ erro }}</h1>
  <ion-list *ngFor="let produto of produtos">
    <!-- <ion-item>
      <div>
        <img class="fotoProduto" async src="{{ produto.foto }}">
      </div>
      
      <ion-label>
        {{ produto.descricao }}
        R${{ produto.preco }}
      </ion-label>

    </ion-item> -->

    <ion-item routerLink='/descricao/{{produto.id}}'>
          <img class="fotoProduto" async src="{{ produto.foto }}">

        <ion-label>
          <h2 class="posicao">{{ produto.descricao }}</h2>
          <br>
          <h3 class="posicao">R${{ produto.preco }}</h3>
          <br>
          <p class="posicao">Tralala</p>
        </ion-label>
      </ion-item>
  </ion-list>



<script>
    const searchbar = document.querySelector('ion-searchbar');
    const items = Array.from(document.querySelector('ion-list').children);
    searchbar.addEventListener('ionInput', handleInput);
    function handleInput(event) {
      const query = event.target.value.toLowerCase();
      requestAnimationFrame(() => {
        items.forEach(item => {
          const shouldShow = item.textContent.toLowerCase().indexOf(query) > -1;
          item.style.display = shouldShow ? 'block' : 'none';
        });
      });
    }
  </script>

</ion-content>
